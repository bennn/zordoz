<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>2&nbsp;REPL</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x"><span style="font-weight: bold">Zordoz</span></a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">REPL</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="API.html" class="tocviewlink" data-pltdoc="x">API</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Future_Work.html" class="tocviewlink" data-pltdoc="x">Future Work</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">REPL</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#%28part._.Summary%29" class="tocviewlink" data-pltdoc="x">Summary</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="#%28part._.Commands%29" class="tocviewlink" data-pltdoc="x">Commands</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="#%28part._.Sample_.Interaction%29" class="tocviewlink" data-pltdoc="x">Sample Interaction</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.Summary%29" class="tocsubseclink" data-pltdoc="x">Summary</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._.Commands%29" class="tocsubseclink" data-pltdoc="x">Commands</a></td></tr><tr><td><span class="tocsublinknumber">2.2.1<tt>&nbsp;</tt></span><a href="#%28part._alst%29" class="tocsubseclink" data-pltdoc="x"><span style="font-weight: bold">alst</span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.2<tt>&nbsp;</tt></span><a href="#%28part._back%29" class="tocsubseclink" data-pltdoc="x"><span style="font-weight: bold">back</span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.3<tt>&nbsp;</tt></span><a href="#%28part._dive%29" class="tocsubseclink" data-pltdoc="x"><span style="font-weight: bold">dive</span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.4<tt>&nbsp;</tt></span><a href="#%28part._find%29" class="tocsubseclink" data-pltdoc="x"><span style="font-weight: bold">find</span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.5<tt>&nbsp;</tt></span><a href="#%28part._help%29" class="tocsubseclink" data-pltdoc="x"><span style="font-weight: bold">help</span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.6<tt>&nbsp;</tt></span><a href="#%28part._info%29" class="tocsubseclink" data-pltdoc="x"><span style="font-weight: bold">info</span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.7<tt>&nbsp;</tt></span><a href="#%28part._jump%29" class="tocsubseclink" data-pltdoc="x"><span style="font-weight: bold">jump</span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.8<tt>&nbsp;</tt></span><a href="#%28part._save%29" class="tocsubseclink" data-pltdoc="x"><span style="font-weight: bold">save</span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.9<tt>&nbsp;</tt></span><a href="#%28part._quit%29" class="tocsubseclink" data-pltdoc="x"><span style="font-weight: bold">quit</span></a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._.Sample_.Interaction%29" class="tocsubseclink" data-pltdoc="x">Sample Interaction</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">6.1.1.7</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="Overview.html" title="backward to &quot;1 Overview&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Zordoz&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="API.html" title="forward to &quot;3 API&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>2<tt>&nbsp;</tt><a name="(part._.R.E.P.L)"></a>REPL</h3><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Summary%29" class="toclink" data-pltdoc="x">2.1<span class="hspace">&nbsp;</span>Summary</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Commands%29" class="toclink" data-pltdoc="x">2.2<span class="hspace">&nbsp;</span>Commands</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._alst%29" class="toclink" data-pltdoc="x">2.2.1<span class="hspace">&nbsp;</span><span style="font-weight: bold">alst</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._back%29" class="toclink" data-pltdoc="x">2.2.2<span class="hspace">&nbsp;</span><span style="font-weight: bold">back</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._dive%29" class="toclink" data-pltdoc="x">2.2.3<span class="hspace">&nbsp;</span><span style="font-weight: bold">dive</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._find%29" class="toclink" data-pltdoc="x">2.2.4<span class="hspace">&nbsp;</span><span style="font-weight: bold">find</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._help%29" class="toclink" data-pltdoc="x">2.2.5<span class="hspace">&nbsp;</span><span style="font-weight: bold">help</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._info%29" class="toclink" data-pltdoc="x">2.2.6<span class="hspace">&nbsp;</span><span style="font-weight: bold">info</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._jump%29" class="toclink" data-pltdoc="x">2.2.7<span class="hspace">&nbsp;</span><span style="font-weight: bold">jump</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._save%29" class="toclink" data-pltdoc="x">2.2.8<span class="hspace">&nbsp;</span><span style="font-weight: bold">save</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._quit%29" class="toclink" data-pltdoc="x">2.2.9<span class="hspace">&nbsp;</span><span style="font-weight: bold">quit</span></a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Sample_.Interaction%29" class="toclink" data-pltdoc="x">2.3<span class="hspace">&nbsp;</span>Sample Interaction</a></p></td></tr></table><p>The REPL is a simple, interactive way to explore bytecode files.
It is implemented in the file <span class="stt">zo-shell.rkt</span>, which exports a single function:</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><span class="RktSymDef RktSym">init</span></span><span class="hspace">&nbsp;</span><span class="RktVar">args</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">void?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vectorof</span><span class="hspace">&nbsp;</span><span class="RktSym">string?</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Accepts a <span class="stt">vector</span> of command-line arguments, parses the first argument as a bytecode file, then starts a REPL session using the output of calling <a href="http://docs.racket-lang.org/raco/decompile.html#%28def._%28%28lib._compiler%2Fzo-parse..rkt%29._zo-parse%29%29">zo-parse</a> on this file.</div></p><p>This document is a users&rsquo; guide for the REPL.
See the <a href="API.html" data-pltdoc="x">API</a> page for implementation details.</p><h4>2.1<tt>&nbsp;</tt><a name="(part._.Summary)"></a>Summary</h4><p><div class="SIntrapara">The REPL works by storing an internal <span style="font-style: italic">context</span> and reacting to commands.
This context is normally a zo struct, but may also be:
</div><div class="SIntrapara"><ul><li><p>A list of zo structs</p></li><li><p>Search results, obtained by calling <a href="#%28part._find%29" data-pltdoc="x"><span style="font-weight: bold">find</span></a>.</p></li></ul></div></p><p>The commands show information about this context or change it.</p><p>Also, the REPL remembers previous states.
We call this recorded past the <span style="font-style: italic">history</span> of the REPL.
It&rsquo;s basically a list of contexts.</p><h4>2.2<tt>&nbsp;</tt><a name="(part._.Commands)"></a>Commands</h4><p>The REPL supports commands to display and explore structs parsed from a <span class="stt">.zo</span> file.</p><h5>2.2.1<tt>&nbsp;</tt><a name="(part._alst)"></a><span style="font-weight: bold">alst</span></h5><p>List all command aliases.</p><p>For fun and uniformity, the canonical name of each command has 4 letters.
But each has plenty of shorter and more mnemonic aliases to choose from.
For example, you can type <span class="stt">ls</span> instead of <a href="#%28part._info%29" data-pltdoc="x"><span style="font-weight: bold">info</span></a> and <span class="stt">cd</span> instead of <a href="#%28part._dive%29" data-pltdoc="x"><span style="font-weight: bold">dive</span></a>.</p><h5>2.2.2<tt>&nbsp;</tt><a name="(part._back)"></a><span style="font-weight: bold">back</span></h5><p>Move up to the previous context.</p><p>Each successful <a href="#%28part._dive%29" data-pltdoc="x"><span style="font-weight: bold">dive</span></a> or <a href="#%28part._find%29" data-pltdoc="x"><span style="font-weight: bold">find</span></a> command changes the current context to new struct or list.
Before making these transitions, we save the previous context to a stack.
The <a href="#%28part._back%29" data-pltdoc="x"><span style="font-weight: bold">back</span></a> command pops and switches to the most recent element from this stack.</p><p>Note that <a href="#%28part._back%29" data-pltdoc="x"><span style="font-weight: bold">back</span></a> will fail (and do nothing) at the top of the zo struct hierarchy or the top of a saved subtree.</p><h5>2.2.3<tt>&nbsp;</tt><a name="(part._dive)"></a><span style="font-weight: bold">dive</span></h5><p>Enter a struct&rsquo;s field.</p><p><div class="SIntrapara">This is where exploring happens.
Each struct has a few fields; you can see these by printing with <a href="#%28part._info%29" data-pltdoc="x"><span style="font-weight: bold">info</span></a>.
Any field containing zo structs is a candidate for dive.
For example, the struct <a href="http://docs.racket-lang.org/raco/decompile.html#%28def._%28%28lib._compiler%2Fzo-structs..rkt%29._assign%29%29">assign</a> has a field <span class="stt">rhs</span>, which can be accessed by:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktSym">dive</span><span class="hspace">&nbsp;</span><span class="RktSym">rhs</span></p></blockquote></div></p><p><div class="SIntrapara">Notes:
</div><div class="SIntrapara"><ul><li><p>Fields that do not exist or do not contain structs may not be explored.</p></li><li><p>Fields that are zo change the context to a zo; fields that are lists change the context to a list.</p></li><li><p>Elements in a list may be accessed by their index, as in <a href="#%28part._dive%29" data-pltdoc="x"><span style="font-weight: bold">dive</span></a> <span class="stt">3</span>.</p></li><li><p><a href="#%28part._dive%29" data-pltdoc="x"><span style="font-weight: bold">dive</span></a> takes exactly one argument. Any more or less is not permitted.</p></li></ul></div></p><h5>2.2.4<tt>&nbsp;</tt><a name="(part._find)"></a><span style="font-weight: bold">find</span></h5><p>Search the current struct&rsquo;s children for a certain zo struct.</p><p>Find uses string matching to automate a simple search process.
Give it a string, for instance <a href="#%28part._find%29" data-pltdoc="x"><span style="font-weight: bold">find</span></a> <a href="http://docs.racket-lang.org/raco/decompile.html#%28def._%28%28lib._compiler%2Fzo-structs..rkt%29._lam%29%29">lam</a>, and it searches for <a href="http://docs.racket-lang.org/raco/decompile.html#%28def._%28%28lib._compiler%2Fzo-structs..rkt%29._lam%29%29">lam</a> structs nested within the current context.
The string must be the name of a zo struct&#8212;<wbr></wbr>anything else will return null results.</p><p>A successful find changes context to a list of zo structs.
Exploring any element of the list changes the current history to be that element&rsquo;s history.
You are free to explore the children and parents of any struct returned by a find query.
Use <a href="#%28part._jump%29" data-pltdoc="x"><span style="font-weight: bold">jump</span></a> to immediately return to the search results.</p><h5>2.2.5<tt>&nbsp;</tt><a name="(part._help)"></a><span style="font-weight: bold">help</span></h5><p>Print command information.</p><p>Shows a one-line summary of each command.
The tabernacle is all-knowing.</p><h5>2.2.6<tt>&nbsp;</tt><a name="(part._info)"></a><span style="font-weight: bold">info</span></h5><p>Print the current context.</p><p>This <a href="#%28part._info%29" data-pltdoc="x"><span style="font-weight: bold">info</span></a> command does the real work of exploring.
It shows the current context, whether struct or list.
Lists give their length and the names of their elements.
Zo structs show their name, their fields&rsquo; names, and their fields&rsquo; values.
Non-struct field values are printed as best we know how; struct field values are not printed in detail, but may be <a href="#%28part._dive%29" data-pltdoc="x"><span style="font-weight: bold">dive</span></a>-ed into.</p><p>There is currently no tool for printing the current history.</p><h5>2.2.7<tt>&nbsp;</tt><a name="(part._jump)"></a><span style="font-weight: bold">jump</span></h5><p>Warp back to a previously-saved context.</p><p>The commands <a href="#%28part._jump%29" data-pltdoc="x"><span style="font-weight: bold">jump</span></a> and <a href="#%28part._save%29" data-pltdoc="x"><span style="font-weight: bold">save</span></a> work together.
After saving or making a successful query with <a href="#%28part._find%29" data-pltdoc="x"><span style="font-weight: bold">find</span></a>, the current history is saved.
At this point, a step backwards will recover this history.
The interesting thing is that steps forward create a new history, and you can immediately forget that new history by calling <a href="#%28part._jump%29" data-pltdoc="x"><span style="font-weight: bold">jump</span></a>.</p><p>For example, if you call <a href="#%28part._find%29" data-pltdoc="x"><span style="font-weight: bold">find</span></a> and explore one of the results, you can immediately <a href="#%28part._jump%29" data-pltdoc="x"><span style="font-weight: bold">jump</span></a> back to your search results.</p><h5>2.2.8<tt>&nbsp;</tt><a name="(part._save)"></a><span style="font-weight: bold">save</span></h5><p>Mark the current context and history as a future target for <a href="#%28part._jump%29" data-pltdoc="x"><span style="font-weight: bold">jump</span></a>.</p><p>Manually calling <a href="#%28part._save%29" data-pltdoc="x"><span style="font-weight: bold">save</span></a> is not very useful, but helpful if you know of a zo struct you will want to revisit.</p><h5>2.2.9<tt>&nbsp;</tt><a name="(part._quit)"></a><span style="font-weight: bold">quit</span></h5><p>Exit the REPL.</p><h4>2.3<tt>&nbsp;</tt><a name="(part._.Sample_.Interaction)"></a>Sample Interaction</h4><p><div class="SIntrapara">Let&rsquo;s explore the REPL&rsquo;s own bytecode.
First, compile the project and build an executable:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">$</span><span class="hspace">&nbsp;</span><span class="RktSym">raco</span><span class="hspace">&nbsp;</span><span class="RktSym">make</span><span class="hspace">&nbsp;</span><span class="RktSym">zordoz.rkt</span></td></tr><tr><td><span class="RktSym">$</span><span class="hspace">&nbsp;</span><span class="RktSym">raco</span><span class="hspace">&nbsp;</span><span class="RktSym">exe</span><span class="hspace">&nbsp;</span><span class="RktSym">zordoz.rkt</span></td></tr></table></blockquote></div></p><p>Now we have both an executable and some bytecode to explore.
Open the bytecode for <span class="stt">zo-string.rkt</span>.
You should see the interpreter prompt.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">$</span><span class="hspace">&nbsp;</span><span class="RktSym">./zordoz</span><span class="hspace">&nbsp;</span><span class="RktSym">private/compiled/zo-string_rkt.zo</span></td></tr><tr><td><span class="RktSym">INFO:</span><span class="hspace">&nbsp;</span><span class="RktSym">Loading</span><span class="hspace">&nbsp;</span><span class="RktSym">bytecode</span><span class="hspace">&nbsp;</span><span class="RktSym">file</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">private/compiled/zo-string_rkt.zo</span><span class="RktVal">'</span><span class="RktVal">...</span></td></tr><tr><td><span class="RktSym">INFO:</span><span class="hspace">&nbsp;</span><span class="RktSym">Parsing</span><span class="hspace">&nbsp;</span><span class="RktSym">bytecode...</span></td></tr><tr><td><span class="RktSym">INFO:</span><span class="hspace">&nbsp;</span><span class="RktSym">Parsing</span><span class="hspace">&nbsp;</span><span class="RktSym">complete!</span></td></tr><tr><td><span class="RktSym"><span class="nobreak">---</span></span><span class="hspace">&nbsp;</span><span class="RktSym">Welcome</span><span class="hspace">&nbsp;</span><span class="RktSym">to</span><span class="hspace">&nbsp;</span><span class="RktSym">the</span><span class="hspace">&nbsp;</span><span class="RktSym">.zo</span><span class="hspace">&nbsp;</span><span class="RktSym">shell</span><span class="RktRdr">,</span><span class="RktSym">version</span><span class="hspace">&nbsp;</span><span class="RktVal">1.0</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">vortex</span><span class="RktVal">'</span><span class="RktVal"><span class="nobreak">---</span></span></td></tr><tr><td><span class="RktSym">zo&gt;</span></td></tr></table></blockquote><p>Now we can start typing commands, like <a href="#%28part._info%29" data-pltdoc="x"><span style="font-weight: bold">info</span></a>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">zo&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">info</span></td></tr><tr><td><span class="RktSym">&lt;struct:compilation-top&gt;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">max-let-depth</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktVal">31</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">prefix</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;struct:prefix&gt;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">code</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;struct:mod&gt;</span></td></tr></table></blockquote><p>Next, let&rsquo;s try a <a href="#%28part._dive%29" data-pltdoc="x"><span style="font-weight: bold">dive</span></a>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">zo&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">dive</span><span class="hspace">&nbsp;</span><span class="RktSym">max-let-depth</span></td></tr><tr><td><span class="RktVal">'</span><span class="RktVal">dive</span><span class="hspace">&nbsp;</span><span class="RktSym">max-let-depth</span><span class="RktVal">'</span><span class="RktVal">not</span><span class="hspace">&nbsp;</span><span class="RktSym">permitted.</span></td></tr></table></blockquote><p>Didn&rsquo;t work!
That&rsquo;s because <span class="stt">max-let-depth</span> is an integer.
Let&rsquo;s try one of the structs.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">zo&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">dive</span><span class="hspace">&nbsp;</span><span class="RktSym">prefix</span></td></tr><tr><td><span class="RktSym">zo&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">info</span></td></tr><tr><td><span class="RktSym">&lt;struct:prefix&gt;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">num-lifts</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">toplevels</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktVal">#f</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">stxs</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">]</span></td></tr></table></blockquote><p>Great!
We can&rsquo;t dive any further from here, so let&rsquo;s go back up.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">zo&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">back</span></td></tr><tr><td><span class="RktSym">zo&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">info</span></td></tr><tr><td><span class="RktSym">&lt;struct:compilation-top&gt;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">max-let-depth</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktVal">31</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">prefix</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;struct:prefix&gt;</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">code</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">&lt;struct:mod&gt;</span></td></tr></table></blockquote><p>And we&rsquo;re back to where we began.
From here we <span style="font-style: italic">could</span> dive to the <span class="stt">code</span> field and print it, but the printout is a little overwhelming.
The module we&rsquo;re exploring, <span class="stt">zo-string</span>, creates over 40 different functions.
There&rsquo;s just a lot of data to look at, and because it&rsquo;s heterogenous data we do not have a nice way of truncating it.</p><p>Instead, we let&rsquo;s use <a href="#%28part._find%29" data-pltdoc="x"><span style="font-weight: bold">find</span></a>.
Be warned, the search might take a minute.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">zo&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">find</span><span class="hspace">&nbsp;</span><span class="RktSym">compilation-top</span></td></tr><tr><td><span class="RktSym">FIND</span><span class="hspace">&nbsp;</span><span class="RktSym">returned</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">results</span></td></tr></table></blockquote><p>Zero results is good: there should not be any other <span class="stt">compilation-top</span> structs besides the one we&rsquo;re currently in.
Now try searching for something else, like <a href="http://docs.racket-lang.org/raco/decompile.html#%28def._%28%28lib._compiler%2Fzo-structs..rkt%29._branch%29%29">branch</a>.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktSym">zo&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">find</span><span class="hspace">&nbsp;</span><span class="RktSym">branch</span></td></tr><tr><td><span class="RktSym">FIND</span><span class="hspace">&nbsp;</span><span class="RktSym">returned</span><span class="hspace">&nbsp;</span><span class="RktVal">422</span><span class="hspace">&nbsp;</span><span class="RktSym">results</span></td></tr><tr><td><span class="RktSym">FIND</span><span class="hspace">&nbsp;</span><span class="RktSym">automatically</span><span class="hspace">&nbsp;</span><span class="RktSym">saving</span><span class="hspace">&nbsp;</span><span class="RktSym">context</span></td></tr><tr><td><span class="RktSym">&lt;struct:branch&gt;</span><span class="RktPn">[</span><span class="RktVal">422</span><span class="RktPn">]</span></td></tr></table></blockquote><p>Wow! Over 400 results.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="Overview.html" title="backward to &quot;1 Overview&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Zordoz&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="API.html" title="forward to &quot;3 API&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>